/*** Generated by streamline 0.4.5 (spoon) - DO NOT EDIT ***/var __$rt = require('streamline/lib/spoon/runtime');
(function(__$callback) {
var __$i0 = function(exports) {
    var __$i68;
    var __$i53;
    var has;
    var funnel;
    var future;
    var VERSION;
    "use strict";
    VERSION = 3;
    future = function(fn, args, i) {
        var err, result, done, q, self;
        q = [];
        self = this;
        args = Array.prototype.slice.call(args);
        args[i] = function(e, r) {
            var __$i1214;
            var __$i1204;
            err = e;
            result = r;
            done = true;
            __$i1204 = q;
            if (__$i1204) {
                __$i1214 = q.forEach(function(f) {
                    f.call(self, e, r);
                });
            } else {
                __$i1214 = __$i1204;
            };
            q = null;
        };
        fn.apply(this, args);
        return function F(cb) {
            if (!cb) {
                return F;
            } else {
                if (done) {
                    cb.call(self, err, result);
                } else {
                    q.push(cb);
                };
            };
        };
    };
    exports.funnel = function(max) {
        var __$i295;
        var fun;
        var queue, active, closed;
        if (max == null) {
            __$i295 = -1;
        } else {
            __$i295 = max;
        };
        max = __$i295;
        if (max === 0) {
            max = funnel.defaultSize;
        } else {};
        if (typeof max !== "number") {
            throw new Error("bad max number: " + max);
        } else {
            queue = [];
            active = 0;
            closed = false;
            fun = function(callback, fn) {
                var __$i1290;
                var __$i1279;
                var __$i1260;
                var __$i1251;
                if (callback == null) {
                    return future(fun, arguments, 0);
                } else {
                    __$i1251 = max < 0;
                    if (__$i1251) {
                        __$i1260 = __$i1251;
                    } else {
                        __$i1260 = max == Infinity;
                    };
                    if (__$i1260) {
                        return fn(callback);
                    } else {
                        queue.push({
                            fn: fn,
                            cb: callback
                        });
                        function _doOne() {
                            var current;
                            current = queue.splice(0, 1)[0];
                            if (!current.cb) {
                                return current.fn();
                            } else {
                                active++;
                                current.fn(function(err, result) {
                                    var __$i1593;
                                    var __$i1582;
                                    active--;
                                    if (!closed) {
                                        current.cb(err, result);
                                        while (true) {
                                            __$i1582 = active < max;
                                            if (__$i1582) {
                                                __$i1593 = queue.length > 0;
                                            } else {
                                                __$i1593 = __$i1582;
                                            };
                                            if (!__$i1593) {
                                                break;
                                            } else {
                                                _doOne();
                                            };
                                        };
                                    } else {};
                                });
                            };
                        };
                        while (true) {
                            __$i1279 = active < max;
                            if (__$i1279) {
                                __$i1290 = queue.length > 0;
                            } else {
                                __$i1290 = __$i1279;
                            };
                            if (!__$i1290) {
                                break;
                            } else {
                                _doOne();
                            };
                        };
                    };
                };
            };
            fun.close = function() {
                queue = [];
                closed = true;
            };
            return fun;
        };
    };
    funnel = exports.funnel;
    funnel.defaultSize = 4;
    function _parallel(options) {
        var __$i363;
        if (typeof options === "number") {
            return options;
        } else {
            if (typeof options.parallel === "number") {
                return options.parallel;
            } else {
                if (options.parallel) {
                    __$i363 = -1;
                } else {
                    __$i363 = 1;
                };
                return __$i363;
            };
        };
    };
    __$i53 = Array.prototype.forEach_;
    if (__$i53) {
        __$i68 = Array.prototype.forEach_.version_ >= VERSION;
    } else {
        __$i68 = __$i53;
    };
    if (__$i68) {
        return;
    } else {
        try {
            Object.defineProperty({}, "x", {});
            has = Object.prototype.hasOwnProperty;
            delete Array.prototype.forEach_;
            Object.defineProperty(Array.prototype, "forEach_", {
                configurable: true,
                writable: true,
                enumerable: false,
                value: function __$anon1(__$callback, options, fn, thisObj) {
                    if (!__$callback) {
                        return __$rt.future.call(this, __$anon1, arguments, 0);
                    }
                    var __$i412;
                    var __$i403;
                    var __$i393;
                    var __$r386;
                    function __$fn386(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r386 = __$r
                        };
                        while (true) {
                            if (!(i < len)) {
                                break;
                            } else {
                                has.call(this, i);
                                return __$fn385.call(this);
                            };
                        };
                        return __$fn383.call(this);
                    };
                    var __$r385;
                    function __$fn385(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r385 = __$r
                        };
                        i++;
                        return __$fn386.call(this);
                    };
                    var __$r384;
                    function __$fn384(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r384 = __$r
                        };
                        return __$fn385.call(this);
                    };
                    var __$r383;
                    function __$fn383(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r383 = __$r
                        };
                        return __$callback.call(this, null, this);
                    };
                    var __$r382;
                    function __$fn382(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r382 = __$r
                        };
                        return __$fn383.call(this);
                    };
                    var i;
                    var len;
                    var par;
                    if (typeof options === "function") {
                        thisObj = fn;
                        fn = options;
                        options = 1;
                    } else {};
                    par = _parallel(options);
                    if (thisObj !== undefined) {
                        __$i393 = thisObj;
                    } else {
                        __$i393 = this;
                    };
                    thisObj = __$i393;
                    len = this.length;
                    __$i403 = par === 1;
                    if (__$i403) {
                        __$i412 = __$i403;
                    } else {
                        __$i412 = len <= 1;
                    };
                    if (__$i412) {
                        i = 0;
                        return __$fn386.call(this);
                    } else {
                        return this.map_(__$fn382, par, fn, thisObj);
                    };
                }
            });
            Array.prototype.forEach_.version_ = VERSION;
            delete Array.prototype.map_;
            Object.defineProperty(Array.prototype, "map_", {
                configurable: true,
                writable: true,
                enumerable: false,
                value: function __$anon2(__$callback, options, fn, thisObj) {
                    if (!__$callback) {
                        return __$rt.future.call(this, __$anon2, arguments, 0);
                    }
                    var __$i508;
                    var __$i499;
                    var __$i488;
                    var __$r393;
                    function __$fn393(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r393 = __$r
                        };
                        while (true) {
                            if (!(i < len)) {
                                break;
                            } else {
                                has.call(this, i);
                                return __$fn392.call(this);
                            };
                        };
                        return __$fn390.call(this);
                    };
                    var __$r392;
                    function __$fn392(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r392 = __$r
                        };
                        i++;
                        return __$fn393.call(this);
                    };
                    var __$r391;
                    function __$fn391(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r391 = __$r
                        };
                        __$i581[__$i582] = __$r391;
                        return __$fn392.call(this);
                    };
                    var __$r390;
                    function __$fn390(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r390 = __$r
                        };
                        return __$callback.call(this, null, result);
                    };
                    var __$r389;
                    function __$fn389(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r389 = __$r
                        };
                        while (true) {
                            if (!(i < len)) {
                                break;
                            } else {
                                has.call(this, i);
                                return __$fn388.call(this);
                            };
                        };
                        return __$fn390.call(this);
                    };
                    var __$r388;
                    function __$fn388(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r388 = __$r
                        };
                        i++;
                        return __$fn389.call(this);
                    };
                    var __$r387;
                    function __$fn387(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r387 = __$r
                        };
                        __$i533[__$i534] = __$r387;
                        return __$fn388.call(this);
                    };
                    var i;
                    var fun;
                    var i;
                    var result;
                    var len;
                    var par;
                    if (typeof options === "function") {
                        thisObj = fn;
                        fn = options;
                        options = 1;
                    } else {};
                    par = _parallel(options);
                    if (thisObj !== undefined) {
                        __$i488 = thisObj;
                    } else {
                        __$i488 = this;
                    };
                    thisObj = __$i488;
                    len = this.length;
                    __$i499 = par === 1;
                    if (__$i499) {
                        __$i508 = __$i499;
                    } else {
                        __$i508 = len <= 1;
                    };
                    if (__$i508) {
                        result = new Array(len);
                        i = 0;
                        return __$fn389.call(this);
                    } else {
                        fun = funnel(par);
                        result = this.map(function(elt, i) {
                            return fun(null, function __$anon3(__$callback) {
                                if (!__$callback) {
                                    return __$rt.future.call(this, __$anon3, arguments, 0);
                                }
                                var __$r435;
                                function __$fn435(__$e, __$r) {
                                    if (__$e) {
                                        return __$callback.call(this, __$e);
                                    } else {
                                        __$r435 = __$r
                                    };
                                    return __$callback.call(this, null, __$r435);
                                };
                                return fn.call(thisObj, __$fn435, elt, i);
                            });
                        });
                        i = 0;
                        return __$fn393.call(this);
                    };
                }
            });
            delete Array.prototype.filter_;
            Object.defineProperty(Array.prototype, "filter_", {
                configurable: true,
                writable: true,
                enumerable: false,
                value: function __$anon4(__$callback, options, fn, thisObj) {
                    if (!__$callback) {
                        return __$rt.future.call(this, __$anon4, arguments, 0);
                    }
                    var __$i648;
                    var __$i639;
                    var __$i626;
                    var __$r398;
                    function __$fn398(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r398 = __$r
                        };
                        while (true) {
                            if (!(i < len)) {
                                break;
                            } else {
                                has.call(this, i);
                                return __$fn397.call(this);
                            };
                        };
                        return __$fn395.call(this);
                    };
                    var __$r397;
                    function __$fn397(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r397 = __$r
                        };
                        i++;
                        return __$fn398.call(this);
                    };
                    var __$r396;
                    function __$fn396(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r396 = __$r
                        };
                        if (__$r396) {
                            result.push(elt);
                        } else {};
                        return __$fn397.call(this);
                    };
                    var __$r395;
                    function __$fn395(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r395 = __$r
                        };
                        return __$callback.call(this, null, result);
                    };
                    var __$r394;
                    function __$fn394(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r394 = __$r
                        };
                        return __$fn395.call(this);
                    };
                    var elt;
                    var i;
                    var len;
                    var result;
                    var par;
                    if (typeof options === "function") {
                        thisObj = fn;
                        fn = options;
                        options = 1;
                    } else {};
                    par = _parallel(options);
                    if (thisObj !== undefined) {
                        __$i626 = thisObj;
                    } else {
                        __$i626 = this;
                    };
                    thisObj = __$i626;
                    result = [];
                    len = this.length;
                    __$i639 = par === 1;
                    if (__$i639) {
                        __$i648 = __$i639;
                    } else {
                        __$i648 = len <= 1;
                    };
                    if (__$i648) {
                        i = 0;
                        return __$fn398.call(this);
                    } else {
                        return this.map_(__$fn394, par, function __$anon5(__$callback, elt) {
                            if (!__$callback) {
                                return __$rt.future.call(this, __$anon5, arguments, 0);
                            }
                            var __$r420;
                            function __$fn420(__$e, __$r) {
                                if (__$e) {
                                    return __$callback.call(this, __$e);
                                } else {
                                    __$r420 = __$r
                                };
                                if (__$r420) {
                                    result.push(elt);
                                } else {};
                                return __$callback.call(this, null);
                            };
                            return fn.call(thisObj, __$fn420, elt);
                        }, thisObj);
                    };
                }
            });
            delete Array.prototype.every_;
            Object.defineProperty(Array.prototype, "every_", {
                configurable: true,
                writable: true,
                enumerable: false,
                value: function __$anon6(__$callback, options, fn, thisObj) {
                    if (!__$callback) {
                        return __$rt.future.call(this, __$anon6, arguments, 0);
                    }
                    var __$i824;
                    var __$i835;
                    var __$i770;
                    var __$i785;
                    var __$i751;
                    var __$i742;
                    var __$i732;
                    var __$r405;
                    function __$fn405(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r405 = __$r
                        };
                        while (true) {
                            if (!(i < len)) {
                                break;
                            } else {
                                __$i824 = has.call(this, i);
                                if (__$i824) {
                                    return futures[i](__$fn403);
                                } else {
                                    __$i835 = __$i824;
                                    return __$fn404.call(this);
                                };
                            };
                        };
                        return __$fn402.call(this);
                    };
                    var __$r404;
                    function __$fn404(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r404 = __$r
                        };
                        if (__$i835) {
                            fun.close();
                            return __$callback.call(this, null, false);
                        } else {
                            i++;
                            return __$fn405.call(this);
                        };
                    };
                    var __$r403;
                    function __$fn403(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r403 = __$r
                        };
                        __$i835 = !__$r403;
                        return __$fn404.call(this);
                    };
                    var __$r402;
                    function __$fn402(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r402 = __$r
                        };
                        return __$callback.call(this, null, true);
                    };
                    var __$r401;
                    function __$fn401(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r401 = __$r
                        };
                        while (true) {
                            if (!(i < len)) {
                                break;
                            } else {
                                __$i770 = has.call(this, i);
                                if (__$i770) {
                                    return fn.call(thisObj, __$fn399, this[i]);
                                } else {
                                    __$i785 = __$i770;
                                    return __$fn400.call(this);
                                };
                            };
                        };
                        return __$fn402.call(this);
                    };
                    var __$r400;
                    function __$fn400(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r400 = __$r
                        };
                        if (__$i785) {
                            return __$callback.call(this, null, false);
                        } else {
                            i++;
                            return __$fn401.call(this);
                        };
                    };
                    var __$r399;
                    function __$fn399(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r399 = __$r
                        };
                        __$i785 = !__$r399;
                        return __$fn400.call(this);
                    };
                    var i;
                    var futures;
                    var fun;
                    var i;
                    var len;
                    var par;
                    if (typeof options === "function") {
                        thisObj = fn;
                        fn = options;
                        options = 1;
                    } else {};
                    par = _parallel(options);
                    if (thisObj !== undefined) {
                        __$i732 = thisObj;
                    } else {
                        __$i732 = this;
                    };
                    thisObj = __$i732;
                    len = this.length;
                    __$i742 = par === 1;
                    if (__$i742) {
                        __$i751 = __$i742;
                    } else {
                        __$i751 = len <= 1;
                    };
                    if (__$i751) {
                        i = 0;
                        return __$fn401.call(this);
                    } else {
                        fun = funnel(par);
                        futures = this.map(function(elt) {
                            return fun(null, function __$anon7(__$callback) {
                                if (!__$callback) {
                                    return __$rt.future.call(this, __$anon7, arguments, 0);
                                }
                                var __$r436;
                                function __$fn436(__$e, __$r) {
                                    if (__$e) {
                                        return __$callback.call(this, __$e);
                                    } else {
                                        __$r436 = __$r
                                    };
                                    return __$callback.call(this, null, __$r436);
                                };
                                return fn.call(thisObj, __$fn436, elt);
                            });
                        });
                        i = 0;
                        return __$fn405.call(this);
                    };
                }
            });
            delete Array.prototype.some_;
            Object.defineProperty(Array.prototype, "some_", {
                configurable: true,
                writable: true,
                enumerable: false,
                value: function __$anon8(__$callback, options, fn, thisObj) {
                    if (!__$callback) {
                        return __$rt.future.call(this, __$anon8, arguments, 0);
                    }
                    var __$i971;
                    var __$i981;
                    var __$i918;
                    var __$i932;
                    var __$i899;
                    var __$i890;
                    var __$i880;
                    var __$r412;
                    function __$fn412(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r412 = __$r
                        };
                        while (true) {
                            if (!(i < len)) {
                                break;
                            } else {
                                __$i971 = has.call(this, i);
                                if (__$i971) {
                                    return futures[i](__$fn410);
                                } else {
                                    __$i981 = __$i971;
                                    return __$fn411.call(this);
                                };
                            };
                        };
                        return __$fn409.call(this);
                    };
                    var __$r411;
                    function __$fn411(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r411 = __$r
                        };
                        if (__$i981) {
                            fun.close();
                            return __$callback.call(this, null, true);
                        } else {
                            i++;
                            return __$fn412.call(this);
                        };
                    };
                    var __$r410;
                    function __$fn410(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r410 = __$r
                        };
                        __$i981 = __$r410;
                        return __$fn411.call(this);
                    };
                    var __$r409;
                    function __$fn409(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r409 = __$r
                        };
                        return __$callback.call(this, null, false);
                    };
                    var __$r408;
                    function __$fn408(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r408 = __$r
                        };
                        while (true) {
                            if (!(i < len)) {
                                break;
                            } else {
                                __$i918 = has.call(this, i);
                                if (__$i918) {
                                    return fn.call(thisObj, __$fn406, this[i]);
                                } else {
                                    __$i932 = __$i918;
                                    return __$fn407.call(this);
                                };
                            };
                        };
                        return __$fn409.call(this);
                    };
                    var __$r407;
                    function __$fn407(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r407 = __$r
                        };
                        if (__$i932) {
                            return __$callback.call(this, null, true);
                        } else {
                            i++;
                            return __$fn408.call(this);
                        };
                    };
                    var __$r406;
                    function __$fn406(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r406 = __$r
                        };
                        __$i932 = __$r406;
                        return __$fn407.call(this);
                    };
                    var i;
                    var futures;
                    var fun;
                    var i;
                    var len;
                    var par;
                    if (typeof options === "function") {
                        thisObj = fn;
                        fn = options;
                        options = 1;
                    } else {};
                    par = _parallel(options);
                    if (thisObj !== undefined) {
                        __$i880 = thisObj;
                    } else {
                        __$i880 = this;
                    };
                    thisObj = __$i880;
                    len = this.length;
                    __$i890 = par === 1;
                    if (__$i890) {
                        __$i899 = __$i890;
                    } else {
                        __$i899 = len <= 1;
                    };
                    if (__$i899) {
                        i = 0;
                        return __$fn408.call(this);
                    } else {
                        fun = funnel(par);
                        futures = this.map(function(elt) {
                            return fun(null, function __$anon9(__$callback) {
                                if (!__$callback) {
                                    return __$rt.future.call(this, __$anon9, arguments, 0);
                                }
                                var __$r437;
                                function __$fn437(__$e, __$r) {
                                    if (__$e) {
                                        return __$callback.call(this, __$e);
                                    } else {
                                        __$r437 = __$r
                                    };
                                    return __$callback.call(this, null, __$r437);
                                };
                                return fn.call(thisObj, __$fn437, elt);
                            });
                        });
                        i = 0;
                        return __$fn412.call(this);
                    };
                }
            });
            delete Array.prototype.reduce_;
            Object.defineProperty(Array.prototype, "reduce_", {
                configurable: true,
                writable: true,
                enumerable: false,
                value: function __$anon10(__$callback, fn, v, thisObj) {
                    if (!__$callback) {
                        return __$rt.future.call(this, __$anon10, arguments, 0);
                    }
                    var __$i1009;
                    var __$r415;
                    function __$fn415(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r415 = __$r
                        };
                        while (true) {
                            if (!(i < len)) {
                                break;
                            } else {
                                has.call(this, i);
                                return __$fn414.call(this);
                            };
                        };
                        return __$callback.call(this, null, v);
                    };
                    var __$r414;
                    function __$fn414(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r414 = __$r
                        };
                        i++;
                        return __$fn415.call(this);
                    };
                    var __$r413;
                    function __$fn413(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r413 = __$r
                        };
                        v = __$r413;
                        return __$fn414.call(this);
                    };
                    var i;
                    var len;
                    if (thisObj !== undefined) {
                        __$i1009 = thisObj;
                    } else {
                        __$i1009 = this;
                    };
                    thisObj = __$i1009;
                    len = this.length;
                    i = 0;
                    return __$fn415.call(this);
                }
            });
            delete Array.prototype.reduceRight_;
            Object.defineProperty(Array.prototype, "reduceRight_", {
                configurable: true,
                writable: true,
                enumerable: false,
                value: function __$anon11(__$callback, fn, v, thisObj) {
                    if (!__$callback) {
                        return __$rt.future.call(this, __$anon11, arguments, 0);
                    }
                    var __$i1066;
                    var __$r418;
                    function __$fn418(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r418 = __$r
                        };
                        while (true) {
                            if (!(i >= 0)) {
                                break;
                            } else {
                                has.call(this, i);
                                return __$fn417.call(this);
                            };
                        };
                        return __$callback.call(this, null, v);
                    };
                    var __$r417;
                    function __$fn417(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r417 = __$r
                        };
                        i--;
                        return __$fn418.call(this);
                    };
                    var __$r416;
                    function __$fn416(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r416 = __$r
                        };
                        v = __$r416;
                        return __$fn417.call(this);
                    };
                    var i;
                    var len;
                    if (thisObj !== undefined) {
                        __$i1066 = thisObj;
                    } else {
                        __$i1066 = this;
                    };
                    thisObj = __$i1066;
                    len = this.length;
                    i = len - 1;
                    return __$fn418.call(this);
                }
            });
            delete Array.prototype.sort_;
            Object.defineProperty(Array.prototype, "sort_", {
                configurable: true,
                writable: true,
                enumerable: false,
                value: function __$anon12(__$callback, compare, beg, end) {
                    if (!__$callback) {
                        return __$rt.future.call(this, __$anon12, arguments, 0);
                    }
                    var __$i1142;
                    var __$i1125;
                    var __$i1118;
                    var __$r419;
                    function __$fn419(__$e, __$r) {
                        if (__$e) {
                            return __$callback.call(this, __$e);
                        } else {
                            __$r419 = __$r
                        };
                        return __$callback.call(this, null, array);
                    };
                    var array;
                    array = this;
                    __$i1118 = beg;
                    if (__$i1118) {
                        __$i1125 = __$i1118;
                    } else {
                        __$i1125 = 0;
                    };
                    beg = __$i1125;
                    if (end == null) {
                        __$i1142 = array.length - 1;
                    } else {
                        __$i1142 = end;
                    };
                    end = __$i1142;
                    function _qsort(__$callback, beg, end) {
                        if (!__$callback) {
                            return __$rt.future.call(this, _qsort, arguments, 0);
                        }
                        var __$i1440;
                        var __$i1455;
                        var __$i1409;
                        var __$i1424;
                        var __$r426;
                        function __$fn426(__$e, __$r) {
                            var __$r430;
                            function __$fn430(__$e, __$r) {
                                if (__$e) {
                                    return __$callback.call(this, __$e);
                                } else {
                                    __$r430 = __$r
                                };
                                if (nbeg <= nend) {
                                    tmp = array[nbeg];
                                    array[nbeg] = array[nend];
                                    array[nend] = tmp;
                                    nbeg++;
                                    nend--;
                                } else {};
                                return __$fn425.call(this);
                            };
                            var __$r429;
                            function __$fn429(__$e, __$r) {
                                if (__$e) {
                                    return __$callback.call(this, __$e);
                                } else {
                                    __$r429 = __$r
                                };
                                while (true) {
                                    __$i1440 = beg < nend;
                                    if (__$i1440) {
                                        return compare(__$fn427, o, array[nend]);
                                    } else {
                                        __$i1455 = __$i1440;
                                        return __$fn428.call(this);
                                    };
                                };
                                return __$fn430.call(this);
                            };
                            var __$r428;
                            function __$fn428(__$e, __$r) {
                                if (__$e) {
                                    return __$callback.call(this, __$e);
                                } else {
                                    __$r428 = __$r
                                };
                                if (!__$i1455) {
                                    return __$fn430.call(this);
                                } else {
                                    nend--;
                                    return __$fn429.call(this);
                                };
                            };
                            var __$r427;
                            function __$fn427(__$e, __$r) {
                                if (__$e) {
                                    return __$callback.call(this, __$e);
                                } else {
                                    __$r427 = __$r
                                };
                                __$i1455 = __$r427 < 0;
                                return __$fn428.call(this);
                            };
                            if (__$e) {
                                return __$callback.call(this, __$e);
                            } else {
                                __$r426 = __$r
                            };
                            return __$fn429.call(this);
                        };
                        var __$r425;
                        function __$fn425(__$e, __$r) {
                            var __$r432;
                            function __$fn432(__$e, __$r) {
                                var __$r434;
                                function __$fn434(__$e, __$r) {
                                    if (__$e) {
                                        return __$callback.call(this, __$e);
                                    } else {
                                        __$r434 = __$r
                                    };
                                    return __$callback.call(this, null);
                                };
                                var __$r433;
                                function __$fn433(__$e, __$r) {
                                    if (__$e) {
                                        return __$callback.call(this, __$e);
                                    } else {
                                        __$r433 = __$r
                                    };
                                    return __$fn434.call(this);
                                };
                                if (__$e) {
                                    return __$callback.call(this, __$e);
                                } else {
                                    __$r432 = __$r
                                };
                                beg < nend;
                                return __$fn434.call(this);
                            };
                            var __$r431;
                            function __$fn431(__$e, __$r) {
                                if (__$e) {
                                    return __$callback.call(this, __$e);
                                } else {
                                    __$r431 = __$r
                                };
                                return __$fn432.call(this);
                            };
                            if (__$e) {
                                return __$callback.call(this, __$e);
                            } else {
                                __$r425 = __$r
                            };
                            while (true) {
                                if (!(nbeg <= nend)) {
                                    break;
                                } else {
                                    return __$fn424.call(this);
                                };
                            };
                            nbeg < end;
                            return __$fn432.call(this);
                        };
                        var __$r424;
                        function __$fn424(__$e, __$r) {
                            if (__$e) {
                                return __$callback.call(this, __$e);
                            } else {
                                __$r424 = __$r
                            };
                            while (true) {
                                __$i1409 = nbeg < end;
                                if (__$i1409) {
                                    return compare(__$fn422, array[nbeg], o);
                                } else {
                                    __$i1424 = __$i1409;
                                    return __$fn423.call(this);
                                };
                            };
                            return __$fn426.call(this);
                        };
                        var __$r423;
                        function __$fn423(__$e, __$r) {
                            if (__$e) {
                                return __$callback.call(this, __$e);
                            } else {
                                __$r423 = __$r
                            };
                            if (!__$i1424) {
                                return __$fn426.call(this);
                            } else {
                                nbeg++;
                                return __$fn424.call(this);
                            };
                        };
                        var __$r422;
                        function __$fn422(__$e, __$r) {
                            if (__$e) {
                                return __$callback.call(this, __$e);
                            } else {
                                __$r422 = __$r
                            };
                            __$i1424 = __$r422 < 0;
                            return __$fn423.call(this);
                        };
                        var __$r421;
                        function __$fn421(__$e, __$r) {
                            if (__$e) {
                                return __$callback.call(this, __$e);
                            } else {
                                __$r421 = __$r
                            };
                            if (__$r421 > 0) {
                                tmp = array[beg];
                                array[beg] = array[end];
                                array[end] = tmp;
                            } else {};
                            return __$callback.call(this, null);
                        };
                        var tmp;
                        var nend;
                        var nbeg;
                        var o;
                        var mid;
                        var tmp;
                        if (beg >= end) {
                            return __$callback.call(this, null);
                        } else {
                            if (end == beg + 1) {
                                return compare(__$fn421, array[beg], array[end]);
                            } else {
                                mid = Math.floor((beg + end) / 2);
                                o = array[mid];
                                nbeg = beg;
                                nend = end;
                                return __$fn425.call(this);
                            };
                        };
                    };
                    return _qsort(__$fn419, beg, end);
                }
            });
            delete Function.prototype.apply_;
            Object.defineProperty(Function.prototype, "apply_", {
                configurable: true,
                writable: true,
                enumerable: false,
                value: function(callback, thisObj, args, index) {
                    var __$i1187;
                    var __$i1176;
                    var __$i1163;
                    var __$i1164;
                    var __$i1167;
                    args = Array.prototype.slice.call(args, 0);
                    __$i1163 = args;
                    __$i1164 = "splice";
                    __$i1167 = index != null;
                    if (__$i1167) {
                        __$i1176 = index >= 0;
                    } else {
                        __$i1176 = __$i1167;
                    };
                    if (__$i1176) {
                        __$i1187 = index;
                    } else {
                        __$i1187 = args.length;
                    };
                    __$i1163[__$i1164](__$i1187, 0, callback);
                    return this.apply(thisObj, args);
                }
            });
        } catch (e) {
            return;
        };
    };
};

if (typeof exports !== "undefined") {
    __$i25 = exports;
} else {
    var __$i9 = Streamline;
    var __$i10 = "builtins";
    var __$i13 = Streamline.builtins;
    if (__$i13) {
        __$i20 = __$i13;
    } else {
        __$i20 = {};
    };
    var __$i20;
    __$i25 = __$i9[__$i10] = __$i20;
};

var __$i25;

__$i0(__$i25);

return __$callback.call(this, null);
})(function(__$e) { if (__$e) console.log(__$e); });
